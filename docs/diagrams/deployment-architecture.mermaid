graph TB
    subgraph "Docker Host"
        subgraph "Application Containers"
            Gateway[api-gateway:8080]
            Eureka[eureka-server:8761]
            Account[account-service:8081]
            Transfer[transfer-service:8082]
        end
        
        subgraph "Data Containers"
            Postgres[postgres:5432<br/>banking_accounts<br/>banking_transfers]
            Redis[redis:6379<br/>Cache & Idempotency]
        end
        
        subgraph "Messaging Containers"
            Zookeeper[zookeeper:2181<br/>Kafka Coordination]
            Kafka[kafka:9092<br/>Event Streaming]
        end
        
        subgraph "Monitoring Containers (Future)"
            Zipkin[zipkin:9411<br/>Distributed Tracing]
            Prometheus[prometheus:9090<br/>Metrics]
            Grafana[grafana:3000<br/>Dashboards]
        end
    end
    
    subgraph "External Access"
        Client[Client Applications]
        Admin[Admin Tools<br/>Postman, DBeaver]
    end
    
    Client -->|HTTP 8080| Gateway
    Admin -->|HTTP 8761| Eureka
    Admin -->|JDBC 5432| Postgres
    Admin -->|TCP 6379| Redis
    
    Gateway -->|Service Call| Account
    Gateway -->|Service Call| Transfer
    
    Account -->|JDBC| Postgres
    Transfer -->|JDBC| Postgres
    
    Account -->|Cache| Redis
    Transfer -->|Cache| Redis
    
    Account -->|Events| Kafka
    Transfer -->|Events| Kafka
    
    Kafka -->|Coordination| Zookeeper
    
    Account -.->|Traces| Zipkin
    Transfer -.->|Traces| Zipkin
    
    Account -.->|Metrics| Prometheus
    Transfer -.->|Metrics| Prometheus
    
    Prometheus -.->|Data| Grafana
    
    style Gateway fill:#4CAF50,stroke:#2E7D32,color:#fff
    style Eureka fill:#2196F3,stroke:#1565C0,color:#fff
    style Account fill:#FF9800,stroke:#E65100,color:#fff
    style Transfer fill:#FF9800,stroke:#E65100,color:#fff
    style Postgres fill:#9C27B0,stroke:#6A1B9A,color:#fff
    style Redis fill:#F44336,stroke:#C62828,color:#fff
    style Kafka fill:#00BCD4,stroke:#00838F,color:#fff
    style Zookeeper fill:#00BCD4,stroke:#00838F,color:#fff
    style Zipkin fill:#FFC107,stroke:#F57C00,color:#000
    style Prometheus fill:#FFC107,stroke:#F57C00,color:#000
    style Grafana fill:#FFC107,stroke:#F57C00,color:#000
